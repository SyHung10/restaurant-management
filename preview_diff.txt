
===== src/main/java/com/restaurant/controller/KitchenController.java =====
diff --git a/src/main/java/com/restaurant/controller/KitchenController.java b/src/main/java/com/restaurant/controller/KitchenController.java
index 2956b83..2f4b36f 100644
--- a/src/main/java/com/restaurant/controller/KitchenController.java
+++ b/src/main/java/com/restaurant/controller/KitchenController.java
@@ -17,13 +17,6 @@ import org.springframework.web.bind.annotation.*;
 import java.time.LocalDateTime;
 import java.util.ArrayList;
 import java.util.List;
-import java.util.Map;
-import java.util.HashMap;
-import java.util.Comparator;
-import java.text.SimpleDateFormat;
-import java.util.Calendar;
-import java.util.Date;
-import java.math.BigDecimal;
 
 @Controller
 @RequestMapping("/kitchen")
@@ -145,237 +138,4 @@ public class KitchenController {
 
         return "redirect:/kitchen/pending";
     }
-
-    // Kanban cho bếp: danh sách order group theo order_id, sort theo order_time ASC
-    @RequestMapping(value = "/kanban", method = RequestMethod.GET)
-    public String kitchenKanban(
-            @RequestParam(value = "fromDate", required = false) String fromDateStr,
-            @RequestParam(value = "toDate", required = false) String toDateStr,
-            Model model) throws Exception {
-        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
-        Calendar cal = Calendar.getInstance();
-        Date from = null, to = null;
-        if (fromDateStr != null && !fromDateStr.isEmpty()) {
-            Date d = sdf.parse(fromDateStr);
-            cal.setTime(d);
-            cal.set(Calendar.HOUR_OF_DAY, 0);
-            cal.set(Calendar.MINUTE, 0);
-            cal.set(Calendar.SECOND, 0);
-            cal.set(Calendar.MILLISECOND, 0);
-            from = cal.getTime();
-        }
-        if (toDateStr != null && !toDateStr.isEmpty()) {
-            Date d = sdf.parse(toDateStr);
-            cal.setTime(d);
-            cal.set(Calendar.HOUR_OF_DAY, 23);
-            cal.set(Calendar.MINUTE, 59);
-            cal.set(Calendar.SECOND, 59);
-            cal.set(Calendar.MILLISECOND, 999);
-            to = cal.getTime();
-        }
-        List<Order> allOrders = orderService.findAll();
-        List<Order> filteredOrders = new ArrayList<>();
-        for (Order o : allOrders) {
-            if (from != null && to != null) {
-                if (o.getOrderTime().compareTo(from) >= 0 && o.getOrderTime().compareTo(to) <= 0) {
-                    filteredOrders.add(o);
-                }
-            } else {
-                filteredOrders.add(o);
-            }
-        }
-        // Chuẩn bị dữ liệu bảng và overview
-        Map<Long, List<OrderDetailView>> orderDetailsMap = new HashMap<>();
-        int pendingCount = 0, servedCount = 0, cancelledCount = 0, totalCount = 0;
-        Map<Long, Integer> orderPendingMap = new HashMap<>();
-        Map<Long, Integer> orderServedMap = new HashMap<>();
-        Map<Long, Integer> orderCancelledMap = new HashMap<>();
-        Map<Long, Integer> orderTotalMap = new HashMap<>();
-        for (Order order : filteredOrders) {
-            List<OrderDetail> details = orderDetailService.findByOrderId(order.getOrderId());
-            int orderPending = 0, orderServed = 0, orderCancelled = 0;
-            List<OrderDetailView> detailViews = new ArrayList<>();
-            for (OrderDetail d : details) {
-                if ("PENDING".equals(d.getStatus()) || "PROCESSING".equals(d.getStatus()))
-                    orderPending++;
-                if ("SERVED".equals(d.getStatus()))
-                    orderServed++;
-                if ("CANCELLED".equals(d.getStatus()))
-                    orderCancelled++;
-                Menu menu = menuService.findById(d.getDishId());

===== src/main/java/com/restaurant/controller/PaymentController.java =====
diff --git a/src/main/java/com/restaurant/controller/PaymentController.java b/src/main/java/com/restaurant/controller/PaymentController.java
index 89fbf7a..b5fa464 100644
--- a/src/main/java/com/restaurant/controller/PaymentController.java
+++ b/src/main/java/com/restaurant/controller/PaymentController.java
@@ -84,32 +84,48 @@ public class PaymentController {
                 total = total.add(detail.getPrice().multiply(BigDecimal.valueOf(detail.getQuantity())));
             }
         }
-        // Khuyến mãi giờ vàng
-        BigDecimal hourDiscount = BigDecimal.ZERO;
-        Promotion hourPromo = null;
+        
+        // Khuyến mãi từ session (thường là Happy Hour hoặc promotion tự động)
+        BigDecimal sessionDiscount = BigDecimal.ZERO;
+        Promotion sessionPromo = null;
         if (session.getPromotionId() != null) {
             Promotion promo = promotionService.findById(session.getPromotionId());
-            if (promo != null && "HOUR".equalsIgnoreCase(promo.getType())) {
-                hourPromo = promo;
-                hourDiscount = total.multiply(promo.getDiscountPercent().divide(BigDecimal.valueOf(100)));
+            if (promo != null && promo.isActive()) {
+                sessionPromo = promo;
+                sessionDiscount = promotionService.calculateDiscount(promo, total);
             }
         }
-        // Voucher
+        
+        // Voucher (khuyến mãi theo mã nhập)
         BigDecimal voucherDiscount = BigDecimal.ZERO;
         Promotion voucherPromo = null;
         if (voucherCode != null && !voucherCode.trim().isEmpty()) {
             Promotion promo = promotionService.findByVoucherCode(voucherCode.trim());
-            if (promo != null && "VOUCHER".equalsIgnoreCase(promo.getType())) {
-                voucherPromo = promo;
-                if (promo.getIsPercent() != null && promo.getIsPercent()) {
-                    voucherDiscount = total.multiply(promo.getDiscountPercent().divide(BigDecimal.valueOf(100)));
+            if (promo != null && promo.isActive()) {
+                // Kiểm tra xem voucher còn có thể sử dụng được không (chưa vượt max_usage)
+                if (!promotionService.isPromotionUsable(promo.getPromotionId())) {
+                    redirectAttributes.addFlashAttribute("paymentError", "Voucher '" + voucherCode + "' đã hết lượt sử dụng!");
+                    return "redirect:/employee/table/" + tableId + "/menu";
+                }
+                
+                // Tính voucher discount theo scope (ALL/CATEGORY/DISH)
+                voucherDiscount = promotionService.calculateVoucherDiscountByScope(promo, allDetails);
+                
+                // Kiểm tra điều kiện đơn hàng tối thiểu
+                if (voucherDiscount.compareTo(BigDecimal.ZERO) > 0) {
+                    voucherPromo = promo;
                 } else {
-                    voucherDiscount = promo.getDiscountValue();
+                    redirectAttributes.addFlashAttribute("paymentError", "Voucher '" + voucherCode + "' không áp dụng được cho các món đã chọn hoặc chưa đủ điều kiện tối thiểu!");
+                    return "redirect:/employee/table/" + tableId + "/menu";
                 }
+            } else {
+                redirectAttributes.addFlashAttribute("paymentError", "Mã voucher '" + voucherCode + "' không hợp lệ hoặc đã hết hạn!");
+                return "redirect:/employee/table/" + tableId + "/menu";
             }
         }
+        
         // Tính số tiền cuối cùng
-        BigDecimal finalAmount = total.subtract(hourDiscount).subtract(voucherDiscount);
+        BigDecimal finalAmount = total.subtract(sessionDiscount).subtract(voucherDiscount);
         if (finalAmount.compareTo(BigDecimal.ZERO) < 0)
             finalAmount = BigDecimal.ZERO;
 
@@ -119,15 +135,17 @@ public class PaymentController {
         payment.setSessionId(session.getSessionId());
         payment.setEmployeeId(employee != null ? employee.getEmployeeId() : null);
         payment.setTotalAmount(total);
-        payment.setHourDiscount(hourDiscount);
+        payment.setHourDiscount(sessionDiscount);
         payment.setVoucherDiscount(voucherDiscount);
         payment.setFinalAmount(finalAmount);
         payment.setPaymentMethod(paymentMethod);
         payment.setPaymentTime(new Date());
+        
+        // Ưu tiên voucher trước session promotion
         if (voucherPromo != null) {
             payment.setPromotionId(voucherPromo.getPromotionId());

===== src/main/java/com/restaurant/controller/PromotionController.java =====
diff --git a/src/main/java/com/restaurant/controller/PromotionController.java b/src/main/java/com/restaurant/controller/PromotionController.java
index 0e7d1a8..4495911 100644
--- a/src/main/java/com/restaurant/controller/PromotionController.java
+++ b/src/main/java/com/restaurant/controller/PromotionController.java
@@ -11,11 +11,16 @@ import org.springframework.web.bind.annotation.ModelAttribute;
 import org.springframework.web.bind.annotation.PathVariable;
 import org.springframework.web.bind.annotation.RequestMapping;
 import org.springframework.web.bind.annotation.RequestMethod;
+import org.springframework.web.servlet.mvc.support.RedirectAttributes;
 
 import java.beans.PropertyEditorSupport;
 import java.text.SimpleDateFormat;
-import java.time.LocalTime;
+import java.math.BigDecimal;
 import java.util.Date;
+import java.util.List;
+import java.util.Map;
+import java.util.HashMap;
+
 
 import javax.servlet.http.HttpServletRequest;
 
@@ -29,7 +34,24 @@ public class PromotionController {
     // Danh sách khuyến mãi
     @RequestMapping(value = "/promotions", method = RequestMethod.GET)
     public String listPromotions(Model model) {
-        model.addAttribute("promotions", promotionService.findAll());
+        List<Promotion> promotions = promotionService.findAll();
+        
+        // Tạo Map để lưu usage count cho từng promotion
+        Map<Long, Long> usageCounts = new HashMap<>();
+        Map<Long, Boolean> usabilityStatus = new HashMap<>();
+        
+        for (Promotion promotion : promotions) {
+            Long usageCount = promotionService.countUsageByPromotionId(promotion.getPromotionId());
+            boolean isUsable = promotionService.isPromotionUsable(promotion.getPromotionId());
+            
+            usageCounts.put(promotion.getPromotionId(), usageCount);
+            usabilityStatus.put(promotion.getPromotionId(), isUsable);
+        }
+        
+        model.addAttribute("promotions", promotions);
+        model.addAttribute("usageCounts", usageCounts);
+        model.addAttribute("usabilityStatus", usabilityStatus);
+        
         return "manager/promotion-list";
     }
 
@@ -42,74 +64,272 @@ public class PromotionController {
 
     // Lưu khuyến mãi (thêm/sửa)
     @RequestMapping(value = "/promotions/save", method = RequestMethod.POST)
-    public String savePromotion(HttpServletRequest req) {
-        // Lấy id để phân biệt thêm mới hay sửa
-        Long id = null;
+    public String savePromotion(HttpServletRequest req, RedirectAttributes redirectAttributes) {
         try {
-            String idStr = req.getParameter("promotionId");
-            if (idStr != null && !idStr.isEmpty()) {
-                id = Long.valueOf(idStr);
+            // Lấy id để phân biệt thêm mới hay sửa
+            Long id = null;
+            try {
+                String idStr = req.getParameter("promotionId");
+                if (idStr != null && !idStr.isEmpty()) {
+                    id = Long.valueOf(idStr);
+                }
+            } catch (NumberFormatException e) {
+                // bỏ qua nếu không hợp lệ
             }
-        } catch (NumberFormatException e) {
-            // bỏ qua nếu không hợp lệ
-        }
-        // Lấy hoặc tạo mới Promotion
-        Promotion p = (id != null) ? promotionService.findById(id) : new Promotion();
-        // Gán các thuộc tính từ form
-        p.setType(req.getParameter("type"));
-        p.setName(req.getParameter("name"));
-        // startTime, endTime (HH:mm)
-        try {

===== src/main/java/com/restaurant/dao/OrderDAO.java =====
diff --git a/src/main/java/com/restaurant/dao/OrderDAO.java b/src/main/java/com/restaurant/dao/OrderDAO.java
index d2103b9..306d681 100644
--- a/src/main/java/com/restaurant/dao/OrderDAO.java
+++ b/src/main/java/com/restaurant/dao/OrderDAO.java
@@ -1,115 +1,96 @@
-package com.restaurant.dao;
-
-import com.restaurant.entity.Order;
-import org.hibernate.Session;
-import org.hibernate.SessionFactory;
-import org.hibernate.Transaction;
-import org.springframework.beans.factory.annotation.Autowired;
-import org.springframework.stereotype.Repository;
-
-import java.util.List;
-
-@Repository
-public class OrderDAO {
-    @Autowired
-    private SessionFactory sessionFactory;
-
-    public void save(Order order) {
-        Session s = sessionFactory.openSession();
-        Transaction tx = null;
-        try {
-            tx = s.beginTransaction();
-            s.saveOrUpdate(order);
-            tx.commit();
-        } catch (Exception e) {
-            if (tx != null)
-                tx.rollback();
-            e.printStackTrace();
-        } finally {
-            s.close();
-        }
-    }
-
-    public void delete(Long id) {
-        Session s = sessionFactory.openSession();
-        Transaction tx = null;
-        try {
-            tx = s.beginTransaction();
-            Order order = (Order) s.get(Order.class, id);
-            if (order != null) {
-                s.delete(order);
-            }
-            tx.commit();
-        } catch (Exception e) {
-            if (tx != null)
-                tx.rollback();
-            e.printStackTrace();
-        } finally {
-            s.close();
-        }
-    }
-
-    public Order findById(Long id) {
-        Session s = sessionFactory.openSession();
-        try {
-            return (Order) s.get(Order.class, id);
-        } finally {
-            s.close();
-        }
-    }
-
-    @SuppressWarnings("unchecked")
-    public List<Order> findAll() {
-        Session s = sessionFactory.openSession();
-        try {
-            return s.createQuery("from Order").list();
-        } finally {
-            s.close();
-        }
-    }
-
-    // Tìm tất cả order theo sessionId
-    @SuppressWarnings("unchecked")
-    public List<Order> findBySessionId(Long sessionId) {
-        Session s = sessionFactory.openSession();
-        try {

===== src/main/java/com/restaurant/dao/PromotionDAO.java =====
diff --git a/src/main/java/com/restaurant/dao/PromotionDAO.java b/src/main/java/com/restaurant/dao/PromotionDAO.java
index 87f9bd9..5d3f203 100644
--- a/src/main/java/com/restaurant/dao/PromotionDAO.java
+++ b/src/main/java/com/restaurant/dao/PromotionDAO.java
@@ -6,6 +6,7 @@ import org.hibernate.SessionFactory;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Repository;
 
+import java.math.BigDecimal;
 import java.util.List;
 
 @Repository
@@ -39,7 +40,7 @@ public class PromotionDAO {
     @SuppressWarnings("unchecked")
     public List<Promotion> findAll() {
         Session session = sessionFactory.getCurrentSession();
-        return session.createQuery("from Promotion").list();
+        return session.createQuery("from Promotion order by promotionId desc").list();
     }
 
     public Promotion findByVoucherCode(String voucherCode) {
@@ -53,4 +54,110 @@ public class PromotionDAO {
             session.close();
         }
     }
+
+    @SuppressWarnings("unchecked")
+    public List<Promotion> findActivePromotions() {
+        Session session = sessionFactory.getCurrentSession();
+        return session.createQuery("from Promotion where status = 'ACTIVE' order by promotionId desc").list();
+    }
+
+    @SuppressWarnings("unchecked")
+    public List<Promotion> findByScopeType(String scopeType) {
+        Session session = sessionFactory.getCurrentSession();
+        return session.createQuery("from Promotion where scopeType = :scopeType and status = 'ACTIVE'")
+                .setParameter("scopeType", scopeType)
+                .list();
+    }
+
+    @SuppressWarnings("unchecked")
+    public List<Promotion> findByScopeTypeAndTargetId(String scopeType, Long targetId) {
+        Session session = sessionFactory.getCurrentSession();
+        return session.createQuery("from Promotion where scopeType = :scopeType and targetId = :targetId and status = 'ACTIVE'")
+                .setParameter("scopeType", scopeType)
+                .setParameter("targetId", targetId)
+                .list();
+    }
+
+    @SuppressWarnings("unchecked")
+    public List<Promotion> findApplicablePromotions(BigDecimal orderAmount) {
+        Session session = sessionFactory.getCurrentSession();
+        return session.createQuery("from Promotion where status = 'ACTIVE' and orderMinimum <= :orderAmount order by orderMinimum desc")
+                .setParameter("orderAmount", orderAmount)
+                .list();
+    }
+
+    @SuppressWarnings("unchecked")
+    public List<Promotion> findApplicablePromotions(String scopeType, Long targetId, BigDecimal orderAmount) {
+        Session session = sessionFactory.getCurrentSession();
+        StringBuilder hql = new StringBuilder("from Promotion where status = 'ACTIVE' and orderMinimum <= :orderAmount");
+        
+        if ("ALL".equals(scopeType)) {
+            hql.append(" and scopeType = 'ALL'");
+        } else {
+            hql.append(" and ((scopeType = 'ALL') or (scopeType = :scopeType and targetId = :targetId))");
+        }
+        
+        hql.append(" order by orderMinimum desc");
+        
+        org.hibernate.Query query = session.createQuery(hql.toString())
+                .setParameter("orderAmount", orderAmount);
+        
+        if (!"ALL".equals(scopeType)) {
+            query.setParameter("scopeType", scopeType)
+                 .setParameter("targetId", targetId);
+        }
+        
+        return query.list();
+    }

===== src/main/java/com/restaurant/entity/Promotion.java =====
diff --git a/src/main/java/com/restaurant/entity/Promotion.java b/src/main/java/com/restaurant/entity/Promotion.java
index 05bbefb..ed919c0 100644
--- a/src/main/java/com/restaurant/entity/Promotion.java
+++ b/src/main/java/com/restaurant/entity/Promotion.java
@@ -3,7 +3,6 @@ package com.restaurant.entity;
 import javax.persistence.*;
 import java.io.Serializable;
 import java.math.BigDecimal;
-import java.sql.Time;
 import java.util.Date;
 
 @Entity
@@ -14,38 +13,47 @@ public class Promotion implements Serializable {
     @Column(name = "promotion_id")
     private Long promotionId;
 
-    @Column(name = "type", nullable = false)
-    private String type;
-
-    @Column(name = "name", nullable = false)
+    @Column(name = "name", nullable = false, length = 100)
     private String name;
 
     @Column(name = "start_time")
-    private Time startTime;
+    @Temporal(TemporalType.TIMESTAMP)
+    private Date startTime;
 
     @Column(name = "end_time")
-    private Time endTime;
+    @Temporal(TemporalType.TIMESTAMP)
+    private Date endTime;
 
-    @Column(name = "discount_percent")
+    @Column(name = "discount_percent", precision = 5, scale = 2)
     private BigDecimal discountPercent;
 
-    @Column(name = "voucher_code")
+    @Column(name = "voucher_code", length = 50)
     private String voucherCode;
 
-    @Column(name = "discount_value")
+    @Column(name = "discount_value", precision = 10, scale = 2)
     private BigDecimal discountValue;
 
-    @Column(name = "is_percent")
-    private Boolean isPercent;
-
-    @Column(name = "expiry_date")
-    private Date expiryDate;
+    @Column(name = "is_percent", nullable = false)
+    private Boolean isPercent = false;
 
     @Column(name = "max_usage")
     private Integer maxUsage;
 
-    @Column(name = "status", nullable = false)
-    private String status;
+    @Column(name = "status", nullable = false, length = 20)
+    private String status = "ACTIVE";
+
+    @Column(name = "order_minimum", nullable = false, precision = 10, scale = 2)
+    private BigDecimal orderMinimum = BigDecimal.ZERO;
+
+    @Column(name = "scope_type", nullable = false, length = 20)
+    private String scopeType = "ALL";
+
+    @Column(name = "target_id")
+    private Long targetId;
+
+    // Constructors
+    public Promotion() {
+    }
 
     // Getters and Setters
     public Long getPromotionId() {
@@ -56,14 +64,6 @@ public class Promotion implements Serializable {
         this.promotionId = promotionId;
     }
 

===== src/main/java/com/restaurant/service/OrderService.java =====
diff --git a/src/main/java/com/restaurant/service/OrderService.java b/src/main/java/com/restaurant/service/OrderService.java
index f02f2e2..4b96a89 100644
--- a/src/main/java/com/restaurant/service/OrderService.java
+++ b/src/main/java/com/restaurant/service/OrderService.java
@@ -1,44 +1,40 @@
-package com.restaurant.service;
-
-import com.restaurant.dao.OrderDAO;
-import com.restaurant.entity.Order;
-import org.springframework.beans.factory.annotation.Autowired;
-import org.springframework.stereotype.Service;
-import org.springframework.transaction.annotation.Transactional;
-
-import java.util.List;
-
-@Service
-@Transactional
-public class OrderService {
-    @Autowired
-    private OrderDAO orderDAO;
-
-    public void save(Order order) {
-        orderDAO.save(order);
-    }
-
-    public void delete(Long id) {
-        orderDAO.delete(id);
-    }
-
-    public Order findById(Long id) {
-        return orderDAO.findById(id);
-    }
-
-    public List<Order> findAll() {
-        return orderDAO.findAll();
-    }
-
-    public List<Order> findBySessionId(Long sessionId) {
-        return orderDAO.findBySessionId(sessionId);
-    }
-
-    public List<Order> findByTableId(Long tableId) {
-        return orderDAO.findByTableId(tableId);
-    }
-
-    public List<Order> findAllToday() {
-        return orderDAO.findAllToday();
-    }
-}
+package com.restaurant.service;
+
+import com.restaurant.dao.OrderDAO;
+import com.restaurant.entity.Order;
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.stereotype.Service;
+import org.springframework.transaction.annotation.Transactional;
+
+import java.util.List;
+
+@Service
+@Transactional
+public class OrderService {
+    @Autowired
+    private OrderDAO orderDAO;
+
+    public void save(Order order) {
+        orderDAO.save(order);
+    }
+
+    public void delete(Long id) {
+        orderDAO.delete(id);
+    }
+
+    public Order findById(Long id) {
+        return orderDAO.findById(id);
+    }
+
+    public List<Order> findAll() {
+        return orderDAO.findAll();
+    }

===== src/main/java/com/restaurant/service/PromotionService.java =====
diff --git a/src/main/java/com/restaurant/service/PromotionService.java b/src/main/java/com/restaurant/service/PromotionService.java
index b1da4c6..391029b 100644
--- a/src/main/java/com/restaurant/service/PromotionService.java
+++ b/src/main/java/com/restaurant/service/PromotionService.java
@@ -2,10 +2,12 @@ package com.restaurant.service;
 
 import com.restaurant.dao.PromotionDAO;
 import com.restaurant.entity.Promotion;
+import com.restaurant.entity.Menu;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Service;
 import org.springframework.transaction.annotation.Transactional;
 
+import java.math.BigDecimal;
 import java.util.List;
 
 @Service
@@ -14,6 +16,9 @@ public class PromotionService {
 
     @Autowired
     private PromotionDAO promotionDAO;
+    
+    @Autowired
+    private MenuService menuService;
 
     public PromotionService() {
         // TODO Auto-generated constructor stub
@@ -38,4 +43,203 @@ public class PromotionService {
     public Promotion findByVoucherCode(String voucherCode) {
         return promotionDAO.findByVoucherCode(voucherCode);
     }
+
+    public List<Promotion> findActivePromotions() {
+        return promotionDAO.findActivePromotions();
+    }
+
+    public List<Promotion> findByScopeType(String scopeType) {
+        return promotionDAO.findByScopeType(scopeType);
+    }
+
+    public List<Promotion> findByScopeTypeAndTargetId(String scopeType, Long targetId) {
+        return promotionDAO.findByScopeTypeAndTargetId(scopeType, targetId);
+    }
+
+    public List<Promotion> findApplicablePromotions(BigDecimal orderAmount) {
+        return promotionDAO.findApplicablePromotions(orderAmount);
+    }
+
+    public List<Promotion> findApplicablePromotions(String scopeType, Long targetId, BigDecimal orderAmount) {
+        return promotionDAO.findApplicablePromotions(scopeType, targetId, orderAmount);
+    }
+
+    public Long countByStatus(String status) {
+        return promotionDAO.countByStatus(status);
+    }
+
+    public Long countByScopeType(String scopeType) {
+        return promotionDAO.countByScopeType(scopeType);
+    }
+
+    public Long countByDiscountType(boolean isPercent) {
+        return promotionDAO.countByDiscountType(isPercent);
+    }
+
+    // Đếm số lượt sử dụng của promotion
+    public Long countUsageByPromotionId(Long promotionId) {
+        return promotionDAO.countUsageByPromotionId(promotionId);
+    }
+
+    // Kiểm tra xem promotion có thể sử dụng được không
+    public boolean isPromotionUsable(Long promotionId) {
+        return promotionDAO.isPromotionUsable(promotionId);
+    }
+
+    /**
+     * Tính toán giảm giá cho đơn hàng
+     */
+    public BigDecimal calculateDiscount(Promotion promotion, BigDecimal orderAmount) {
+        if (promotion == null || !promotion.isActive()) {
+            return BigDecimal.ZERO;

===== src/main/webapp/WEB-INF/lib/hibernate-entitymanager-4.3.1.Final.jar =====
diff --git a/src/main/webapp/WEB-INF/lib/hibernate-entitymanager-4.3.1.Final.jar b/src/main/webapp/WEB-INF/lib/hibernate-entitymanager-4.3.1.Final.jar
index dad0823..f001781 100644
Binary files a/src/main/webapp/WEB-INF/lib/hibernate-entitymanager-4.3.1.Final.jar and b/src/main/webapp/WEB-INF/lib/hibernate-entitymanager-4.3.1.Final.jar differ

===== src/main/webapp/WEB-INF/lib/hibernate-jpa-2.1-api-1.0.0.Final.jar =====
diff --git a/src/main/webapp/WEB-INF/lib/hibernate-jpa-2.1-api-1.0.0.Final.jar b/src/main/webapp/WEB-INF/lib/hibernate-jpa-2.1-api-1.0.0.Final.jar
index e2f2c59..1bbbbb9 100644
Binary files a/src/main/webapp/WEB-INF/lib/hibernate-jpa-2.1-api-1.0.0.Final.jar and b/src/main/webapp/WEB-INF/lib/hibernate-jpa-2.1-api-1.0.0.Final.jar differ

===== src/main/webapp/WEB-INF/views/employee/menu.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/employee/menu.jsp b/src/main/webapp/WEB-INF/views/employee/menu.jsp
index 730a476..1b30984 100644
--- a/src/main/webapp/WEB-INF/views/employee/menu.jsp
+++ b/src/main/webapp/WEB-INF/views/employee/menu.jsp
@@ -7,20 +7,20 @@
             <head>
                 <meta charset="UTF-8">
                 <title>Menu & Đơn hàng bàn ${table.tableNumber}</title>
-                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/style.css">
+                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/common/style.css">
                 <!-- Thêm Bootstrap CSS -->
                 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
                 <!-- Thêm Font Awesome cho các icon -->
                 <link rel="stylesheet"
                     href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
                 <!-- Thêm CSS tùy chỉnh -->
-                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/menu-style.css">
+                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/employee/menu-style.css">
                 <!-- Thêm CSS thanh toán -->
-                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/payment-modal.css">
+                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/employee/payment-modal.css">
                 <!-- Thêm CSS trạng thái đơn hàng -->
-                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/menu-order-status.css">
+                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/employee/menu-order-status.css">
                 <!-- Thêm CSS cho modal thêm bàn phụ -->
-                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/add-table-modal.css">
+                <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/employee/add-table-modal.css">
 
             </head>
 
@@ -277,7 +277,7 @@
                                         </div>
                                         <button type="button" class="add-table-btn-new" data-toggle="modal" data-target="#addTableModal">
                                             <i class="fas fa-plus mr-1"></i>Thêm bàn
-                                        </button>
+                                                        </button>
                                     </div>
                                 </c:if>
 
@@ -442,16 +442,23 @@
                                             <div class="col-md-6">
                                                 <div class="form-group">
                                                     <label>Mã voucher (tùy chọn):</label>
-                                                    <input type="text" id="voucherCodeInput" class="form-control" placeholder="Nhập mã voucher">
+                                                    <div class="input-group">
+                                                        <input type="text" id="voucherCodeInput" class="form-control" placeholder="Nhập mã voucher">
+                                                        <div class="input-group-append">
+                                                            <button type="button" class="btn btn-outline-primary" id="applyVoucherBtn" onclick="applyVoucher()">
+                                                                <i class="fas fa-ticket-alt mr-1"></i>Áp mã
+                                                            </button>
+                                                        </div>
+                                                    </div>
                                                 </div>
+                                                <div id="voucherMessage" class="mt-2"></div>
                                             </div>
                                             <div class="col-md-6">
                                                 <div class="payment-summary">
-                                                    <p><strong>Tổng tiền: ${paymentTotal}đ</strong></p>
-                                                    <p>Giảm giá giờ vàng: ${hourDiscount}đ</p>
+                                                    <p><strong>Tổng tiền: <span id="totalAmountDisplay">${paymentTotal}đ</span></strong></p>
                                                     <p>Giảm giá voucher: <span id="voucherDiscountDisplay">0đ</span></p>
                                                     <hr>
-                                                    <h5><strong>Thành tiền: <span id="finalAmountDisplay">${finalAmount}đ</span></strong></h5>
+                                                    <p><strong>Thành tiền: <span id="finalAmountDisplay">${finalAmount}đ</span></strong></p>
                                                 </div>
                                             </div>
                                         </div>
@@ -627,11 +634,11 @@
                 </div>
 
                 <!-- Thêm JavaScript tùy chỉnh (không AJAX) -->
-                <script src="${pageContext.request.contextPath}/resources/js/menu-no-ajax.js"></script>
+                <script src="${pageContext.request.contextPath}/resources/js/employee/menu-no-ajax.js"></script>
                 <!-- Thêm JavaScript cho modal thanh toán -->
-                <script src="${pageContext.request.contextPath}/resources/js/payment-modal.js"></script>
+                <script src="${pageContext.request.contextPath}/resources/js/employee/payment-modal.js"></script>
                 <!-- Thêm JavaScript cho modal thêm bàn phụ -->
-                <script src="${pageContext.request.contextPath}/resources/js/add-table-modal.js"></script>
+                <script src="${pageContext.request.contextPath}/resources/js/employee/add-table-modal.js"></script>
 

===== src/main/webapp/WEB-INF/views/employee/order-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/employee/order-list.jsp b/src/main/webapp/WEB-INF/views/employee/order-list.jsp
index d813c1d..96db54d 100644
--- a/src/main/webapp/WEB-INF/views/employee/order-list.jsp
+++ b/src/main/webapp/WEB-INF/views/employee/order-list.jsp
@@ -1,136 +1,113 @@
-<%@ page language="java" contentType="text/html; charset=UTF-8"
-pageEncoding="UTF-8" %> <%@ taglib prefix="c"
-uri="http://java.sun.com/jsp/jstl/core" %>
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="UTF-8" />
-    <title>Danh sách món đã đặt</title>
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/style.css"
-    />
-    <link
-      rel="stylesheet"
-      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
-    />
-    <style>
-      .badge-pending {
-        background-color: #ffc107;
-        color: #212529;
-      }
+<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
+    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+        <!DOCTYPE html>
+        <html>
 
-      .badge-processing {
-        background-color: #ff9800;
-        color: white;
-      }
+        <head>
+            <meta charset="UTF-8">
+            <title>Danh sách món đã đặt</title>
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/style.css">
+            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
+            <style>
+                .badge-pending {
+                    background-color: #ffc107;
+                    color: #212529;
+                }
 
-      .badge-served {
-        background-color: #28a745;
-        color: white;
-      }
+                .badge-processing {
+                    background-color: #ff9800;
+                    color: white;
+                }
 
-      .badge-cancelled {
-        background-color: #dc3545;
-        color: white;
-      }
-    </style>
-  </head>
+                .badge-served {
+                    background-color: #28a745;
+                    color: white;
+                }
 
-  <body>
-    <div class="container mt-3">
-      <h1>Danh sách món đã đặt cho bàn số ${tableId}</h1>
-      <table class="table table-bordered">
-        <thead>
-          <tr>
-            <th>Tên món</th>
-            <th>Danh mục</th>
-            <th>Giá</th>
-            <th>Số lượng</th>
-            <th>Trạng thái</th>
-            <th>Ghi chú</th>
-          </tr>
-        </thead>

===== src/main/webapp/WEB-INF/views/employee/payment-table-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/employee/payment-table-list.jsp b/src/main/webapp/WEB-INF/views/employee/payment-table-list.jsp
index 54c35e7..1d35237 100644
--- a/src/main/webapp/WEB-INF/views/employee/payment-table-list.jsp
+++ b/src/main/webapp/WEB-INF/views/employee/payment-table-list.jsp
@@ -5,8 +5,8 @@
 
         <head>
             <meta charset="UTF-8">
-            <title>Chọn bàn cần thanh toán</title>
-            <link rel="stylesheet" href="${pageContext.request.contextPath}/css/style.css">
+            <title>Danh sách bàn cần thanh toán</title>
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/common/style.css">
         </head>
 
         <body>

===== src/main/webapp/WEB-INF/views/employee/table-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/employee/table-list.jsp b/src/main/webapp/WEB-INF/views/employee/table-list.jsp
index 5bee360..5bed4ae 100644
--- a/src/main/webapp/WEB-INF/views/employee/table-list.jsp
+++ b/src/main/webapp/WEB-INF/views/employee/table-list.jsp
@@ -1,297 +1,287 @@
 <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
-<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
-<!DOCTYPE html>
-<html>
-<head>
-    <meta charset="UTF-8">
-    <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>Quản lý bàn - Nhân viên</title>
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/employee.css">
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/table-list.css">
-    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
-    <style>
-        .filter-form.compact-filter {
-            background: #fff;
-            border-radius: 12px;
-            box-shadow: 0 2px 8px 0 rgba(80,120,200,0.07);
-            border: 1px solid #e0e7ef;
-            padding: 12px 18px;
-            display: flex;
-            align-items: center;
-            gap: 18px;
-        }
+    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+        <!DOCTYPE html>
+        <html>
 
-        .filter-form .filter-group label {
-            font-weight: 500;
-            color: #333;
-            margin-right: 6px;
-        }
+        <head>
+            <meta charset="UTF-8">
+            <meta name="viewport" content="width=device-width, initial-scale=1.0">
+            <title>Danh sách bàn - POS Nhà hàng</title>
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/common/style.css">
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/employee/tables.css">
+            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
+            <style>
+                .filter-form {
+                    margin-bottom: 20px;
+                    padding: 15px;
+                    background-color: #f8f8f8;
+                    border-radius: 5px;
+                    border: 1px solid #ddd;
+                }
 
-        .filter-form select {
-            padding: 6px 12px;
-            border-radius: 6px;
-            border: 1px solid #d1d5db;
-            background: #f8fafc;
-            font-size: 1em;
-        }
+                .filter-form select,
+                .filter-form button {
+                    padding: 8px;
+                    margin-right: 10px;
+                    border-radius: 4px;
+                    border: 1px solid #ccc;
+                }
 
-        .filter-form button {
-            padding: 7px 14px;
-            border-radius: 6px;
-            border: none;
-            background: #4CAF50;
-            color: #fff;
-            font-weight: 500;
-            transition: background 0.2s;
-        }
+                .filter-form button {
+                    background-color: #4CAF50;
+                    color: white;

===== src/main/webapp/WEB-INF/views/kitchen/pending-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/kitchen/pending-list.jsp b/src/main/webapp/WEB-INF/views/kitchen/pending-list.jsp
index 47c91e4..018cf3d 100644
--- a/src/main/webapp/WEB-INF/views/kitchen/pending-list.jsp
+++ b/src/main/webapp/WEB-INF/views/kitchen/pending-list.jsp
@@ -1,401 +1,191 @@
-<%@ page language="java" contentType="text/html; charset=UTF-8"
-pageEncoding="UTF-8" %> <%@ taglib prefix="c"
-uri="http://java.sun.com/jsp/jstl/core" %> <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
-<!DOCTYPE html>
-<html lang="vi">
-  <head>
-    <meta charset="UTF-8" />
-    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
-    <title>Quản lý đơn hàng - Bếp</title>
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/manager/global.css"
-    />
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/table-list.css"
-    />
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/kitchen.css"
-    />
-    <link
-      rel="stylesheet"
-      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
-    />
-    <style>
-      .overview-bar { display: flex; gap: 24px; margin-bottom: 24px; }
-      .overview-box { flex: 1; background: linear-gradient(135deg, #f8fafc, #e0e7ef 80%); border-radius: 14px; box-shadow: 0 1px 6px 0 rgba(80,120,200,0.08); padding: 18px 0; text-align: center; }
-      .overview-label { color: #888; font-size: 1em; margin-bottom: 2px; }
-      .overview-value { font-size: 2em; font-weight: 700; color: #333; }
-      .overview-pending { background: linear-gradient(135deg, #fffde4, #f9f9d2 80%); }
-      .overview-served { background: linear-gradient(135deg, #e6faea, #d0f5e8 80%); }
-      .overview-cancelled { background: linear-gradient(135deg, #ffeaea, #f9dada 80%); }
-      .overview-total { background: linear-gradient(135deg, #e6f0fa, #d2e3f9 80%); }
-      .order-filter { display: flex; gap: 12px; align-items: center; width: 100%; margin-bottom: 18px; }
-      .order-filter select, .order-filter input[type=date] { padding: 6px 12px; border-radius: 7px; border: 1px solid #d1d5db; background: #f8fafc; font-size: 1em; }
-      .order-filter .btn { background: linear-gradient(90deg, #667eea, #764ba2); color: #fff; border: none; border-radius: 7px; padding: 7px 32px; font-weight: 500; height: 36px; min-width: 120px; font-size: 1.08em; }
-      .order-table {
-        width: 100%;
-        border-collapse: collapse;
-        background: #fff;
-        border-radius: 14px;
-        box-shadow: 0 1px 6px 0 rgba(80,120,200,0.08);
-      }
-      .order-table th, .order-table td { padding: 12px 10px; text-align: center; border-bottom: 1px solid #f0f0f0; }
-      .order-table th { background: #f8fafc; color: #b0b0b0; font-weight: 500; }
-      .order-table td { font-weight: 600; text-align: center; }
-      .order-table tr.order-row { cursor: pointer; transition: background 0.15s; }
-      .order-table tr.order-row:hover { background: #f5f7fa; }
-      .order-table tr.order-detail-row { background: #f9fafb; }
-      .badge-status { border-radius: 8px; padding: 3px 14px; font-weight: 600; font-size: 0.95em; display: inline-block; }
-      .badge-pending { background: #fffde4; color: #b59f00; }
-      .badge-served { background: #e6faea; color: #43b36a; }
-      .badge-cancelled { background: #ffeaea; color: #e53e3e; }
-      .badge-processing { background: #e6f0fa; color: #2b77c7; }
-      .pastel-status-dropdown { border-radius: 7px; border: 1.5px solid #e0e7ef; background: #f8fafc; padding: 4px 10px; font-weight: 500; color: #333; }
-      .order-detail-table { width: 100%; border-collapse: collapse; margin-top: 8px; }
-      .order-detail-table th, .order-detail-table td { padding: 8px 6px; border-bottom: 1px solid #ececec; text-align: left; }
-      .order-detail-table th { background: #f5f7fa; font-size: 1em; }
-      .order-detail-table td select { font-size: 0.98em; }
-      .order-detail-table .badge-status { font-size: 0.95em; }
-      @media (max-width: 900px) { .overview-bar { flex-direction: column; gap: 12px; } .order-table th, .order-table td { padding: 8px 4px; } }
-      .pastel-badge { border: none; box-shadow: none; }
-      .active-badge { box-shadow:0 0 0 2px #a0aec0; }
-      .order-detail-container {
-        border:2px solid #e0e7ef; border-radius:12px; margin:12px auto; padding:12px 0; max-width:1400px; width:99%; background:#f8fafc;
-      }
-      .order-detail-table {
-        margin:auto; width:100%; table-layout:fixed;
-      }
-      .order-detail-table th, .order-detail-table td {
-        overflow-wrap: break-word;
-        word-break: break-word;
-      }
-      .order-detail-table th.cancel-reason,

===== src/main/webapp/WEB-INF/views/login.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/login.jsp b/src/main/webapp/WEB-INF/views/login.jsp
index 329b2d7..1f4defe 100644
--- a/src/main/webapp/WEB-INF/views/login.jsp
+++ b/src/main/webapp/WEB-INF/views/login.jsp
@@ -7,7 +7,7 @@
             <meta charset="UTF-8">
             <meta name="viewport" content="width=device-width, initial-scale=1.0">
             <title>Đăng nhập - Hệ thống POS Nhà hàng</title>
-            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/login.css">
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/common/login.css">
             <link rel="preconnect" href="https://fonts.googleapis.com">
             <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
         </head>

===== src/main/webapp/WEB-INF/views/manager/dashboard.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/dashboard.jsp b/src/main/webapp/WEB-INF/views/manager/dashboard.jsp
index 8a5a2a1..8af80b2 100644
--- a/src/main/webapp/WEB-INF/views/manager/dashboard.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/dashboard.jsp
@@ -1,427 +1,258 @@
-<%@ page language="java" contentType="text/html; charset=UTF-8"
-pageEncoding="UTF-8" %> <%@ taglib prefix="c"
-uri="http://java.sun.com/jsp/jstl/core" %>
-<!DOCTYPE html>
-<html lang="vi">
-  <head>
-    <meta charset="UTF-8" />
-    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
-    <title>Dashboard - Hệ thống POS Nhà hàng</title>
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/manager/global.css"
-    />
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/dashboard.css"
-    />
-    <link
-      rel="stylesheet"
-      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
-    />
-  </head>
+<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
+    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+        <!DOCTYPE html>
+        <html lang="vi">
 
-  <body>
-    <div class="manager-layout">
-      <!-- Sidebar -->
-      <div class="manager-sidebar">
-        <div class="sidebar-header">
-          <div class="sidebar-logo">🍴 HT POS</div>
-          <div class="sidebar-subtitle">Hệ thống quản lý nhà hàng</div>
-        </div>
-        <nav class="sidebar-nav">
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/dashboard"
-              class="sidebar-nav-link active"
-            >
-              <i class="fas fa-tachometer-alt sidebar-nav-icon"></i>
-              <span>Dashboard</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/tables"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-th sidebar-nav-icon"></i>
-              <span>Quản lý bàn</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/menus"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-utensils sidebar-nav-icon"></i>
-              <span>Quản lý món ăn</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/employees"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-users sidebar-nav-icon"></i>
-              <span>Quản lý nhân viên</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/promotions"

===== src/main/webapp/WEB-INF/views/manager/employee-form.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/employee-form.jsp b/src/main/webapp/WEB-INF/views/manager/employee-form.jsp
index c4350cf..c8fd2b6 100644
--- a/src/main/webapp/WEB-INF/views/manager/employee-form.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/employee-form.jsp
@@ -7,8 +7,8 @@
             <meta charset="UTF-8">
             <meta name="viewport" content="width=device-width, initial-scale=1.0">
             <title>${employee.employeeId == null ? 'Thêm nhân viên mới' : 'Chỉnh sửa nhân viên'} - Hệ thống POS</title>
-            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
-            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/employee-form.css">
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/employee-form.css">
             <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
         </head>
 
@@ -228,7 +228,7 @@
                 </div>
             </div>
 
-            <script src="${pageContext.request.contextPath}/resources/js/employee-form.js"></script>
+            <script src="${pageContext.request.contextPath}/resources/js/manager/employee-form.js"></script>
         </body>
 
         </html>
\ No newline at end of file

===== src/main/webapp/WEB-INF/views/manager/employee-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/employee-list.jsp b/src/main/webapp/WEB-INF/views/manager/employee-list.jsp
index fd1074c..d55eb20 100644
--- a/src/main/webapp/WEB-INF/views/manager/employee-list.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/employee-list.jsp
@@ -1,343 +1,262 @@
-<%@ page language="java" contentType="text/html; charset=UTF-8"
-pageEncoding="UTF-8" %> <%@ taglib prefix="c"
-uri="http://java.sun.com/jsp/jstl/core" %>
-<!DOCTYPE html>
-<html lang="vi">
-  <head>
-    <meta charset="UTF-8" />
-    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
-    <title>Quản lý nhân viên - Hệ thống POS</title>
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/manager/global.css"
-    />
-    <link
-      rel="stylesheet"
-      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
-    />
-  </head>
+<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
+    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+        <!DOCTYPE html>
+        <html lang="vi">
 
-  <body>
-    <div class="manager-layout">
-      <!-- Sidebar -->
-      <div class="manager-sidebar">
-        <div class="sidebar-header">
-          <div class="sidebar-logo">🍴 HT POS</div>
-          <div class="sidebar-subtitle">Hệ thống quản lý nhà hàng</div>
-        </div>
-        <nav class="sidebar-nav">
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/dashboard"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-tachometer-alt sidebar-nav-icon"></i>
-              <span>Dashboard</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/tables"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-th sidebar-nav-icon"></i>
-              <span>Quản lý bàn</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/menus"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-utensils sidebar-nav-icon"></i>
-              <span>Quản lý món ăn</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/employees"
-              class="sidebar-nav-link active"
-            >
-              <i class="fas fa-users sidebar-nav-icon"></i>
-              <span>Quản lý nhân viên</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/promotions"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-percent sidebar-nav-icon"></i>
-              <span>Quản lý khuyến mãi</span>

===== src/main/webapp/WEB-INF/views/manager/menu-form.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/menu-form.jsp b/src/main/webapp/WEB-INF/views/manager/menu-form.jsp
index e3a2d63..398c7f3 100644
--- a/src/main/webapp/WEB-INF/views/manager/menu-form.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/menu-form.jsp
@@ -7,8 +7,8 @@
             <meta charset="UTF-8">
             <meta name="viewport" content="width=device-width, initial-scale=1.0">
             <title>${menu.dishId == null ? 'Thêm món mới' : 'Chỉnh sửa món ăn'} - Hệ thống POS</title>
-            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
-            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/menu-form.css">
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/menu-form.css">
             <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
         </head>
 
@@ -219,7 +219,7 @@
                 </div>
             </div>
 
-            <script src="${pageContext.request.contextPath}/resources/js/menu-form.js"></script>
+            <script src="${pageContext.request.contextPath}/resources/js/manager/menu-form.js"></script>
         </body>
 
         </html>
\ No newline at end of file

===== src/main/webapp/WEB-INF/views/manager/menu-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/menu-list.jsp b/src/main/webapp/WEB-INF/views/manager/menu-list.jsp
index d73c2f0..068e3e4 100644
--- a/src/main/webapp/WEB-INF/views/manager/menu-list.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/menu-list.jsp
@@ -7,7 +7,7 @@
             <meta charset="UTF-8">
             <meta name="viewport" content="width=device-width, initial-scale=1.0">
             <title>Quản lý món ăn - Hệ thống POS</title>
-            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+            <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
             <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
         </head>
 
@@ -254,7 +254,7 @@
                 </div>
             </div>
 
-            <script src="${pageContext.request.contextPath}/resources/js/menu-list.js"></script>
+            <script src="${pageContext.request.contextPath}/resources/js/manager/menu-list.js"></script>
         </body>
 
         </html>
\ No newline at end of file

===== src/main/webapp/WEB-INF/views/manager/promotion-form.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/promotion-form.jsp b/src/main/webapp/WEB-INF/views/manager/promotion-form.jsp
index 0692b4c..134134c 100644
--- a/src/main/webapp/WEB-INF/views/manager/promotion-form.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/promotion-form.jsp
@@ -7,9 +7,10 @@
             <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>${promotion.promotionId == null ? 'Thêm khuyến mãi mới' : 'Chỉnh sửa khuyến mãi'} - Hệ thống POS</title>
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/promotion-form.css">
+    <title>${promotion.promotionId == null ? 'Thêm mới' : 'Chỉnh sửa'} khuyến mãi - Nhà hàng</title>
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/form.css">
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/promotion-form.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
             </head>
 
@@ -66,17 +67,12 @@
             <!-- Header -->
             <div class="manager-header">
                 <div class="page-header">
-                    <h1 class="page-title">
-                        <i class="fas fa-percent mr-2"></i>
-                        ${promotion.promotionId == null ? 'Thêm khuyến mãi mới' : 'Chỉnh sửa khuyến mãi'}
-                    </h1>
-                    <p class="page-subtitle">
-                        ${promotion.promotionId == null ? 'Tạo chương trình khuyến mãi mới' : 'Cập nhật thông tin khuyến mãi'}
-                    </p>
+                    <h1 class="page-title">${promotion.promotionId == null ? 'Thêm mới' : 'Chỉnh sửa'} khuyến mãi</h1>
+                    <p class="page-subtitle">${promotion.promotionId == null ? 'Tạo chương trình khuyến mãi mới' : 'Cập nhật thông tin khuyến mãi'}</p>
                 </div>
                 <div class="header-actions">
                     <a href="${pageContext.request.contextPath}/manager/promotions" class="btn btn-secondary">
-                        <i class="fas fa-arrow-left"></i>
+                        <i class="fas fa-arrow-left mr-1"></i>
                         <span>Quay lại danh sách</span>
                     </a>
                 </div>
@@ -84,12 +80,27 @@
 
             <!-- Content -->
             <div class="manager-content">
+                <!-- Flash messages -->
+                <c:if test="${not empty error}">
+                    <div class="alert alert-danger">
+                        <i class="fas fa-exclamation-triangle mr-2"></i>
+                        ${error}
+                    </div>
+                </c:if>
+                
+                <c:if test="${not empty success}">
+                    <div class="alert alert-success">
+                        <i class="fas fa-check-circle mr-2"></i>
+                        ${success}
+                    </div>
+                </c:if>
+                
                 <div class="form-section">
                     <div class="form-header">
                         <h2 class="form-title">
                             <i class="fas fa-${promotion.promotionId == null ? 'plus-circle' : 'edit'} mr-2"></i>
                             ${promotion.promotionId == null ? 'Thông tin khuyến mãi mới' : 'Chỉnh sửa thông tin khuyến mãi'}
-                </h2>
+                        </h2>
                         <p class="form-subtitle">
                             ${promotion.promotionId == null ? 'Vui lòng điền đầy đủ thông tin để tạo khuyến mãi mới' : 'Cập nhật thông tin khuyến mãi trong hệ thống'}
                         </p>
@@ -98,6 +109,7 @@
                     <div class="form-body">
                         <form id="promotionForm" action="${pageContext.request.contextPath}/manager/promotions/save" method="post">
                             <input type="hidden" name="promotionId" value="${promotion.promotionId}">
+                            <input type="hidden" name="isPercent" id="isPercent" value="${promotion.isPercent}">
                             
                             <div class="form-grid">
                                 <div class="form-group">
@@ -130,15 +142,41 @@
                                 </div>
 
                                 <div class="form-group">

===== src/main/webapp/WEB-INF/views/manager/promotion-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/promotion-list.jsp b/src/main/webapp/WEB-INF/views/manager/promotion-list.jsp
index b09ab0b..f883719 100644
--- a/src/main/webapp/WEB-INF/views/manager/promotion-list.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/promotion-list.jsp
@@ -1,13 +1,16 @@
-<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
-    <%@ page contentType="text/html;charset=UTF-8" language="java" %>
+<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
+<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
 <!DOCTYPE html>
 <html lang="vi">
         <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>Quản lý khuyến mãi - Hệ thống POS</title>
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+    <title>Quản lý khuyến mãi - Nhà hàng</title>
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/promotion-list.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
+    <script src="${pageContext.request.contextPath}/resources/js/manager/promotion-list.js"></script>
         </head>
         <body>
     <div class="manager-layout">
@@ -63,15 +66,11 @@
             <div class="manager-header">
                 <div class="page-header">
                     <h1 class="page-title">Quản lý khuyến mãi</h1>
-                    <p class="page-subtitle">Thiết lập và quản lý các chương trình khuyến mãi</p>
+                    <p class="page-subtitle">Quản lý các chương trình khuyến mãi của nhà hàng</p>
                 </div>
                 <div class="header-actions">
-                    <div class="search-container">
-                        <i class="fas fa-search search-icon"></i>
-                        <input type="text" placeholder="Tìm kiếm khuyến mãi..." class="search-input">
-                    </div>
                     <a href="${pageContext.request.contextPath}/manager/promotions/new" class="btn btn-primary">
-                        <i class="fas fa-plus"></i>
+                        <i class="fas fa-plus mr-1"></i>
                         <span>Thêm khuyến mãi</span>
                     </a>
                 </div>
@@ -79,17 +78,19 @@
 
             <!-- Content -->
             <div class="manager-content">
-                <!-- Stats Cards -->
-                <div class="grid grid-cols-4 mb-xl">
+                <!-- Statistics Cards -->
+                <div class="stats-grid">
                     <div class="card">
                         <div class="card-body text-center">
-                            <div class="text-2xl font-bold text-gray-900">${promotions.size()}</div>
+                            <div class="text-2xl font-bold text-primary-color">
+                                ${promotions.size()}
+                            </div>
                             <div class="text-sm text-gray-600">Tổng khuyến mãi</div>
                         </div>
                     </div>
                     <div class="card">
                         <div class="card-body text-center">
-                            <div class="text-2xl font-bold text-gray-900">
+                            <div class="text-2xl font-bold text-success-color">
                                 <c:set var="activeCount" value="0"/>
                                 <c:forEach var="promotion" items="${promotions}">
                                     <c:if test="${promotion.status == 'ACTIVE'}">
@@ -103,30 +104,30 @@
                     </div>
                     <div class="card">
                         <div class="card-body text-center">
-                            <div class="text-2xl font-bold text-gray-900">
-                                <c:set var="hourCount" value="0"/>
+                            <div class="text-2xl font-bold text-warning-color">
+                                <c:set var="percentCount" value="0"/>
                                 <c:forEach var="promotion" items="${promotions}">
-                                    <c:if test="${promotion.type == 'HOUR'}">
-                                        <c:set var="hourCount" value="${hourCount + 1}"/>
+                                    <c:if test="${promotion.isPercent}">
+                                        <c:set var="percentCount" value="${percentCount + 1}"/>

===== src/main/webapp/WEB-INF/views/manager/table-form.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/table-form.jsp b/src/main/webapp/WEB-INF/views/manager/table-form.jsp
index 0d20da2..7c42447 100644
--- a/src/main/webapp/WEB-INF/views/manager/table-form.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/table-form.jsp
@@ -7,8 +7,8 @@
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>${table.tableId == null ? 'Thêm bàn mới' : 'Chỉnh sửa bàn'} - Hệ thống POS</title>
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
-    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/table-form.css">
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/table-form.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 </head>
 
@@ -211,7 +211,7 @@
         </div>
     </div>
 
-    <script src="${pageContext.request.contextPath}/resources/js/table-form.js"></script>
+    <script src="${pageContext.request.contextPath}/resources/js/manager/table-form.js"></script>
 </body>
 
 </html>
\ No newline at end of file

===== src/main/webapp/WEB-INF/views/manager/table-list.jsp =====
diff --git a/src/main/webapp/WEB-INF/views/manager/table-list.jsp b/src/main/webapp/WEB-INF/views/manager/table-list.jsp
index 2b15aaf..933cdd2 100644
--- a/src/main/webapp/WEB-INF/views/manager/table-list.jsp
+++ b/src/main/webapp/WEB-INF/views/manager/table-list.jsp
@@ -1,381 +1,267 @@
-<%@ page language="java" contentType="text/html; charset=UTF-8"
-pageEncoding="UTF-8" %> <%@ taglib prefix="c"
-uri="http://java.sun.com/jsp/jstl/core" %> <%@ taglib prefix="fn"
-uri="http://java.sun.com/jsp/jstl/functions" %>
-<!DOCTYPE html>
+<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
+    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
+        <!DOCTYPE html>
 <html lang="vi">
-  <head>
-    <meta charset="UTF-8" />
-    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
+
+        <head>
+            <meta charset="UTF-8">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Quản lý bàn - Hệ thống POS</title>
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/manager/global.css"
-    />
-    <link
-      rel="stylesheet"
-      href="${pageContext.request.contextPath}/resources/css/table-list.css"
-    />
-    <link
-      rel="stylesheet"
-      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
-    />
-  </head>
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/global.css">
+    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/manager/table-list.css">
+    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
+        </head>
 
-  <body>
+        <body>
     <div class="manager-layout">
-      <!-- Sidebar -->
-      <div class="manager-sidebar">
-        <div class="sidebar-header">
-          <div class="sidebar-logo">🍴 HT POS</div>
-          <div class="sidebar-subtitle">Hệ thống quản lý nhà hàng</div>
-        </div>
-        <nav class="sidebar-nav">
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/dashboard"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-tachometer-alt sidebar-nav-icon"></i>
-              <span>Dashboard</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/tables"
-              class="sidebar-nav-link active"
-            >
-              <i class="fas fa-th sidebar-nav-icon"></i>
-              <span>Quản lý bàn</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
-              href="${pageContext.request.contextPath}/manager/menus"
-              class="sidebar-nav-link"
-            >
-              <i class="fas fa-utensils sidebar-nav-icon"></i>
-              <span>Quản lý món ăn</span>
-            </a>
-          </div>
-          <div class="sidebar-nav-item">
-            <a
